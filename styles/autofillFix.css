/* Fix autofill browser per input e textarea */
/* Mantieni design coerente con il design system anche durante autocompletamento */

/* Stato normale (non focus) — Light mode: input è bg-transparent sopra bg-card */
input:-webkit-autofill,
input:-webkit-autofill:hover,
input:-webkit-autofill:active,
textarea:-webkit-autofill,
textarea:-webkit-autofill:hover,
textarea:-webkit-autofill:active {
  -webkit-box-shadow: 0 0 0px 1000px var(--card) inset !important;
  box-shadow: 0 0 0px 1000px var(--card) inset !important;
  -webkit-text-fill-color: var(--foreground) !important;
  caret-color: var(--foreground) !important;
  border-color: var(--input) !important;
  border-radius: var(--radius) !important;
  transition: background-color 5000s ease-in-out 0s;
}

/* Stato normale — Dark mode: input ha dark:bg-input/30 sopra bg-card,
   simuliamo il colore blended con color-mix */
.dark input:-webkit-autofill,
.dark input:-webkit-autofill:hover,
.dark input:-webkit-autofill:active,
.dark textarea:-webkit-autofill,
.dark textarea:-webkit-autofill:hover,
.dark textarea:-webkit-autofill:active {
  -webkit-box-shadow: 0 0 0px 1000px color-mix(in oklch, var(--input) 30%, var(--card)) inset !important;
  box-shadow: 0 0 0px 1000px color-mix(in oklch, var(--input) 30%, var(--card)) inset !important;
}

/* Stato focus — Light mode: replica focus-visible del componente Input
   (border-ring + ring-ring/50 + ring-[3px]) */
input:-webkit-autofill:focus,
textarea:-webkit-autofill:focus {
  -webkit-box-shadow: 0 0 0px 1000px var(--card) inset,
    0 0 0 3px color-mix(in oklch, var(--ring) 50%, transparent) !important;
  box-shadow: 0 0 0px 1000px var(--card) inset,
    0 0 0 3px color-mix(in oklch, var(--ring) 50%, transparent) !important;
  -webkit-text-fill-color: var(--foreground) !important;
  caret-color: var(--foreground) !important;
  border-color: var(--ring) !important;
  border-radius: var(--radius) !important;
}

/* Stato focus — Dark mode */
.dark input:-webkit-autofill:focus,
.dark textarea:-webkit-autofill:focus {
  -webkit-box-shadow: 0 0 0px 1000px color-mix(in oklch, var(--input) 30%, var(--card)) inset,
    0 0 0 3px color-mix(in oklch, var(--ring) 50%, transparent) !important;
  box-shadow: 0 0 0px 1000px color-mix(in oklch, var(--input) 30%, var(--card)) inset,
    0 0 0 3px color-mix(in oklch, var(--ring) 50%, transparent) !important;
}
